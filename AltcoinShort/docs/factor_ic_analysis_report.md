# AltcoinShort 单因子 IC 分析报告

> **分析日期**: 2026-02-16  
> **数据范围**: 2025-01-01 ~ 2026-02-01 (13 个月, ~9,500 小时)  
> **标的池**: Binance USDT 永续合约 Top-50 市值币种 (去除稳定币)  
> **数据分辨率**: 1 分钟 K 线 (resample 至 1 小时用于因子计算)  
> **Forward Return**: 分钟级精度  
> **再平衡频率**: 每 6 小时  
> **因子 Lookback**: 168 小时 (7 天)  

---

## 1. 分析方法

### 1.1 IC (Information Coefficient)

每个再平衡时间点 $t$，计算各币种的截面因子值 $f_{i,t}$ 与未来 $h$ 小时收益率 $r_{i,t \to t+h}$ 的 **Spearman Rank 相关系数**:

$$IC_t = \rho_{rank}(f_{i,t},\ r_{i,t \to t+h})$$

关键指标:
- **IC Mean**: 所有时间点的 IC 均值, |IC| > 0.03 为有统计意义
- **IC IR** (Information Ratio): IC_mean / IC_std, IR > 0.5 为稳定可用
- **IC Direction**: IC 为负的占比 (做空策略中, 正确方向取决于因子定义)
- **N**: 有效截面观测数量

### 1.2 Quintile 分析

每个再平衡时间点, 按因子排序将 50 个币种分为 5 组 (Q1=最低, Q5=最高), 计算各组平均 6 小时 forward return。

### 1.3 IC Decay

在不同 forward horizon (1h, 6h, 12h, 24h, 48h) 下的 IC 变化, 衡量因子预测力的持续性。

---

## 2. 因子定义

所有因子均基于 **168 小时 (7 天) 的小时级 K 线** 计算, 与 `alpha.py` 中的实现完全一致。

| 编号 | 因子名称 | 定义 | 经济含义 |
|------|----------|------|----------|
| A1 | `downward_vol` | $\sigma_{down} \times \sqrt{24} \times 100$ | 下行波动率 (日化), 高值 = 下跌波动剧烈 |
| A1' | `downward_bias` | $\frac{\sigma_{down}}{\sigma_{down} + \sigma_{up}}$ | 波动率中下行占比, 0.5 = 对称 |
| A2 | `asymmetry` | $\frac{\sigma_{down} - \sigma_{up}}{\sigma_{down} + \sigma_{up}}$ | 波动不对称性, 正值 = 下行波动更大 |
| A3 | `skewness` | scipy.stats.skew(hourly returns) | 收益分布偏度, 负 = 左偏尾部 |
| A4 | `vol_expansion` | $\frac{\sigma_{recent24h}}{\sigma_{full168h}}$ | 近期波动相对全期的扩张倍数 |
| B1 | `co_score` | $\sum_{k} 0.95^k \cdot sign(r_{t-k})$ | 持续过度反应 (TS-CO), 正值 = 近期持续上涨 |
| B2 | `disposition` | $\frac{P_{close} - VWAP_{72h}}{VWAP_{72h}}$ | VWAP 乖离率 (处置效应代理), 正值 = 价格高于 VWAP |

---

## 3. IC 分析全量结果

### 3.1 IC 矩阵 (IC Mean)

| Factor | h=1h | h=6h | h=12h | h=24h | h=48h |
|--------|------|------|-------|-------|-------|
| `downward_vol` | -0.0263 | -0.0352 | -0.0412 | -0.0579 | **-0.0728** |
| `downward_bias` | +0.0057 | +0.0178 | +0.0199 | +0.0205 | +0.0223 |
| `asymmetry` | +0.0057 | +0.0178 | +0.0199 | +0.0205 | +0.0223 |
| `skewness` | -0.0052 | -0.0144 | -0.0134 | -0.0118 | -0.0165 |
| `vol_expansion` | -0.0139 | -0.0156 | -0.0210 | -0.0206 | -0.0282 |
| **`co_score`** | **+0.1652** | +0.0538 | +0.0241 | +0.0108 | +0.0083 |
| **`disposition`** | **+0.1673** | +0.0367 | -0.0007 | -0.0169 | -0.0218 |

### 3.2 IC IR 矩阵

| Factor | h=1h | h=6h | h=12h | h=24h | h=48h |
|--------|------|------|-------|-------|-------|
| `downward_vol` | -0.086 | -0.118 | -0.135 | -0.187 | **-0.225** |
| `downward_bias` | +0.029 | +0.092 | +0.100 | +0.100 | +0.109 |
| `asymmetry` | +0.029 | +0.092 | +0.100 | +0.100 | +0.109 |
| `skewness` | -0.027 | -0.075 | -0.069 | -0.058 | -0.082 |
| `vol_expansion` | -0.063 | -0.076 | -0.101 | -0.098 | -0.139 |
| **`co_score`** | **+0.769** | +0.292 | +0.132 | +0.059 | +0.044 |
| **`disposition`** | **+0.736** | +0.153 | -0.003 | -0.069 | -0.085 |

### 3.3 IC 方向一致性 (% 正 IC, 即因子值高 → 未来收益高)

| Factor | h=1h | h=6h | h=12h | h=24h | h=48h |
|--------|------|------|-------|-------|-------|
| `downward_vol` | 48% | 46% | 45% | 45% | 42% |
| `downward_bias` | 51% | 53% | 53% | 54% | 53% |
| `asymmetry` | 51% | 53% | 53% | 54% | 53% |
| `skewness` | 50% | 47% | 48% | 47% | 47% |
| `vol_expansion` | 48% | 47% | 46% | 45% | 44% |
| **`co_score`** | **77%** | 61% | 56% | 52% | 53% |
| **`disposition`** | **78%** | 56% | 49% | 46% | 47% |

---

## 4. Quintile 分组分析 (h=6h)

每组约 10 个币种, Q1 = 因子值最低, Q5 = 因子值最高。

### 4.1 各因子 Quintile 收益 (6h forward return, %)

| Factor | Q1 | Q2 | Q3 | Q4 | Q5 | Q1-Q5 Spread |
|--------|----|----|----|----|----|----|
| `downward_vol` | -0.037 | -0.069 | -0.064 | -0.065 | -0.030 | **-0.007** |
| `downward_bias` | -0.012 | -0.040 | -0.070 | -0.079 | -0.064 | +0.053 |
| `asymmetry` | -0.012 | -0.040 | -0.070 | -0.079 | -0.064 | +0.053 |
| `skewness` | -0.062 | -0.081 | -0.068 | -0.050 | -0.002 | **-0.060** |
| `vol_expansion` | -0.053 | -0.056 | -0.062 | -0.064 | -0.027 | **-0.026** |
| **`co_score`** | **-0.156** | -0.100 | -0.077 | -0.013 | **+0.081** | **-0.237** |
| **`disposition`** | **-0.145** | -0.114 | -0.070 | -0.048 | **+0.112** | **-0.256** |

### 4.2 Quintile 单调性评估

- **co_score**: ✅ **完美单调** (Q1 < Q2 < Q3 < Q4 < Q5), spread = -0.237%
- **disposition**: ✅ **完美单调** (Q1 < Q2 < Q3 < Q4 < Q5), spread = -0.256%
- **skewness**: ⚠️ 部分单调 (Q2 最低不是 Q1), spread = -0.060%  
- **vol_expansion**: ⚠️ 微弱单调, spread = -0.026%
- **downward_vol**: ❌ 非单调 (U 形), spread ≈ 0
- **downward_bias/asymmetry**: ❌ 非单调, 方向与做空预期相反

---

## 5. 逐因子深度评估

### 5.1 co_score — ★★★ 核心因子 (短期动量)

**IC 特征**:
- h=1h: IC=+0.165, IR=0.77 → **极强** (学术界 IR>0.5 即为顶级因子)
- 快速衰减: 6h 降至 0.054, 12h 降至 0.024
- 始终为正 IC → 高 CO (近期持续上涨) 预测未来短期继续上涨

**Quintile 解读**:
- Q1 (CO 最低, 连续下跌的币): 6h 平均 return = -0.156%
- Q5 (CO 最高, 连续上涨的币): 6h 平均 return = +0.081%
- **做空 Q1 (连续下跌) 的收益最高, 做空 Q5 (连续上涨) 会亏损**

**对策略的含义**:
- CO 是一个**动量延续**因子, 不是均值回复因子
- 当前 `alpha.py` 中, co_extreme 时 CO 为正 → co_mult=1.5 (加权做空)
- **这与 IC 数据矛盾**: CO 高的币短期还会涨, 不应该加权做空
- ⚠️ **当前代码逻辑需要修正**: CO 极端为正时应该**降权或排除**做空

**最佳用法**: 作为**入场过滤器**而非选股信号 — CO 极高的币不做空 (避免追空连续上涨的币)

### 5.2 disposition — ★★★ 核心因子 (双时间尺度)

**IC 特征**:
- h=1h: IC=+0.167, IR=0.74 → **极强**, 与 co_score 并列最强
- **独特行为**: IC 在 12h 附近**翻转方向** (正→负)
  - h≤6h: 正 IC → 价格高于 VWAP → 短期继续涨 (动量)
  - h≥24h: 负 IC → 价格高于 VWAP → 中期回落 (均值回归)

**Quintile 解读**:
- Q1 (远低于 VWAP): 6h return = -0.145% → 短期继续跌
- Q5 (远高于 VWAP): 6h return = +0.112% → 短期继续涨  
- 但如果看 24-48h, Q5 会逐渐回落

**对策略的含义**:
- 当前 `alpha.py` 中:
  - disposition > 0.03 → disp_mult 增大 (加权做空高于 VWAP 的币)
  - 这在 h=1-6h 是**错误的** (高于 VWAP 的币短期还会涨)
  - 但在 h=24-48h 是**正确的** (高于 VWAP 的币中期会回落)
- **关键**: 如果 insight_duration=24h, 那 disposition 的方向恰好在持仓期内翻转
- ⚠️ 建议: 如果做空持仓周期 < 12h, 应该反转 disposition 方向; 如果 > 24h, 当前方向正确

**最佳用法**: 
- 做空选股信号 (h=24h+): 做空**高于 VWAP** 的币 ✅ (当前方向正确)
- 入场时机 (h=1-6h): 避免在刚突破 VWAP 向上时立刻做空 (等待动量衰减)

### 5.3 downward_vol — ★★ 慢速趋势因子

**IC 特征**:
- 唯一一个 **IC 随 horizon 增大而增强** 的因子
- h=48h: IC=-0.073, IR=-0.225 → MODERATE 级别
- IC 为负: 高下行波动率 → 未来收益更低 → 做空友好

**Quintile 解读**:
- 非单调 (U 形): Q1 和 Q5 都不是最低收益, Q2-Q4 中间组最低
- 说明该因子在**极端值**时预测力下降 (极高波动率的币可能已经充分定价)

**对策略的含义**:
- 适合作为**中期选股信号** (24h+ 持仓)
- 但不适合做短期择时
- 当前 alpha.py 中作为基础因子使用方向正确, 但权重不应太高

### 5.4 downward_bias ≡ asymmetry — ⚠️ 重复因子, 建议合并

**关键发现**: 两者产生了**完全相同的 IC 结果**。

数学证明:
```
asymmetry = (σ_down - σ_up) / (σ_down + σ_up)
downward_bias = σ_down / (σ_down + σ_up)

asymmetry = 2 × downward_bias - 1  → 线性变换
```

Spearman 只看排序, 线性变换不改变排序 → Rank IC 完全一样。

**IC 评估**: 所有 horizon 的 |IC| < 0.023, |IR| < 0.11, 方向一致性 ~53%

**建议**: 删除 `downward_bias`, 仅保留 `asymmetry` (语义更清晰), 但需要认识到它是一个**弱因子**。

### 5.5 skewness — ✗ 噪音因子

- 所有 horizon: |IC| < 0.017, |IR| < 0.082
- 方向一致性接近 50% (随机)
- Quintile 非单调

**建议**: **从 selection_weight 计算中移除**, 它只增加噪音不增加信号。

### 5.6 vol_expansion — ★ 弱信号

- IC 在 -0.014 ~ -0.028 范围, 方向稳定 (负 IC = 波动扩张 → 未来跌)
- 48h 时 IR=-0.139, 有微弱预测力
- Quintile 部分单调

**建议**: 保留但给予**低权重**, 作为辅助确认信号。

---

## 6. 因子相关性发现

| 组合 | 关系 | 影响 |
|------|------|------|
| `downward_bias` ≡ `asymmetry` | 数学等价 (线性变换) | **必须删除其中一个** |
| `co_score` ↔ `disposition` | h=1h IC 几乎相同 (0.165 vs 0.167) | 可能有高截面相关性, 组合时需正交化 |
| `downward_vol` ↔ `vol_expansion` | 都是波动率类因子 | IC 方向一致但衰减模式不同 |

---

## 7. 综合评级 (考虑所有 Horizon)

| 因子 | 最佳 Horizon | Best IC | Best IR | Quintile 单调 | 综合评级 | 建议角色 |
|------|-------------|---------|---------|--------------|---------|---------|
| **co_score** | 1h | +0.165 | +0.77 | ✅ 完美 | ★★★ STRONG | 短期入场过滤 |
| **disposition** | 1h / 24h+ | +0.167 / -0.022 | +0.74 / -0.09 | ✅ 完美 | ★★★ STRONG | 双层信号 |
| **downward_vol** | 48h | -0.073 | -0.23 | ❌ U 形 | ★★ MODERATE | 中期选股 |
| vol_expansion | 48h | -0.028 | -0.14 | ⚠️ 弱 | ★ WEAK | 辅助确认 |
| asymmetry | 48h | +0.022 | +0.11 | ❌ | ★ WEAK | 可选保留 |
| skewness | - | -0.017 | -0.08 | ❌ | ✗ NOISE | **删除** |
| downward_bias | - | 与 asymmetry 相同 | - | - | 🔄 DUPLICATE | **删除** |

---

## 8. 对 alpha.py 的改进建议

### 8.1 立即可做的修改

1. **删除 skewness**: 从 `selection_weight` 计算中移除 `skew_bonus` 逻辑
2. **合并 downward_bias / asymmetry**: 只保留 `asymmetry`
3. **修正 co_score 方向**: 
   - 当前: `co_score > 0 且 extreme → co_mult = 1.5` (加权做空)
   - 应改为: `co_score > 0 且 extreme → co_mult = 0.3` (排除做空)
   - 原因: IC 数据明确显示 CO 高的币**短期还会涨**, 做空会被轧

### 8.2 结构性优化

4. **双层信号架构**:
   - **Layer 1 — 选股层 (h=24-48h)**: 用 `downward_vol` + `disposition (负方向)` + `vol_expansion`
   - **Layer 2 — 入场过滤层 (h=1-6h)**: 用 `co_score` + `disposition` 判断入场时机
   - 选出做空候选后, 等 CO 从高位回落 + 价格从 VWAP 之上开始下穿时再入场

5. **权重方案 (IC-IR 加权)**:
   ```
   选股权重 (h=24h):
     downward_vol:  0.187 / 0.356 = 52.5%
     disposition:   0.069 / 0.356 = 19.4%
     vol_expansion: 0.098 / 0.356 = 27.5%
     asymmetry:     可选, 低权重
   
   入场过滤 (h=1h):
     co_score > threshold → 延迟入场
     disposition > threshold → 延迟入场
   ```

### 8.3 参数调优方向

6. **insight_duration**: 当前 24h → 考虑改为 **48h** (downward_vol 在 48h 最强)
7. **volatility_cache_hours**: 当前 6h → 合理 (co_score 在 6h 还有效)
8. **max_adverse_vol_ratio**: 当前 2.0 → 该过滤器基于 `upward_vol/downward_vol`, IC 显示不强, 可放宽至 3.0

---

## 9. 市场环境分段 IC 分析

> 基于 2025 年实际市场回顾, 按以下日期划分市场环境:

### 9.1 市场环境划分

| 阶段 | 时间段 | BTC 走势 | 小时数 | 占比 |
|------|--------|---------|--------|------|
| **牛市 (Bull)** | 2025-01-01 ~ 2025-08-31 | $94,364 → $109,340 (+15.9%) | 5,832h | 61.3% |
| **山寨季 (AltSeason)** | 2025-09-01 ~ 2025-10-06 | $108,180 → $123,296 (+14.0%) | 864h | 9.1% |
| **转折期 (Transition)** | 2025-10-07 ~ 2025-10-24 | $124,850 → $110,443 (-11.5%) | 432h | 4.5% |
| **熊市 (Bear)** | 2025-10-25 ~ 2026-02-01 | $110,965 → $78,861 (-28.9%) | 2,389h | 25.1% |

- BTC 全期最高: **$125,986** (ATH, ~10月6日)
- BTC 全期最低: **$74,781** (熊市底部)
- 总跌幅 (ATH → 低点): **-40.6%**

### 9.2 分环境 IC 矩阵 (IC Mean, 括号内为 IR)

#### downward_vol

| Horizon | Bull | AltSeason | Transition | Bear | All |
|---------|------|-----------|------------|------|-----|
| 1h | -0.031(-0.10) | -0.027(-0.11) | -0.022(-0.08) | -0.015(-0.05) | -0.026(-0.09) |
| 6h | -0.037(-0.12) | -0.022(-0.08) | -0.016(-0.06) | -0.040(-0.13) | -0.035(-0.12) |
| 12h | -0.042(-0.13) | -0.011(-0.04) | -0.021(-0.07) | -0.054(-0.18) | -0.041(-0.14) |
| 24h | -0.058(-0.18) | -0.025(-0.09) | +0.008(+0.03) | **-0.081(-0.28)** | -0.058(-0.19) |
| 48h | -0.070(-0.21) | -0.046(-0.16) | +0.013(+0.04) | **-0.106(-0.37)** | -0.073(-0.23) |

#### asymmetry

| Horizon | Bull | AltSeason | Transition | Bear | All |
|---------|------|-----------|------------|------|-----|
| 1h | +0.008(+0.04) | +0.006(+0.03) | -0.006(-0.03) | +0.002(+0.01) | +0.006(+0.03) |
| 6h | +0.020(+0.10) | +0.020(+0.10) | +0.041(+0.22) | +0.007(+0.04) | +0.018(+0.09) |
| 12h | +0.018(+0.09) | +0.019(+0.10) | +0.063(+0.33) | +0.017(+0.09) | +0.020(+0.10) |
| 24h | +0.016(+0.08) | +0.026(+0.13) | +0.083(+0.39) | +0.018(+0.10) | +0.021(+0.10) |
| 48h | +0.013(+0.06) | +0.029(+0.16) | **+0.126(+0.62)** | +0.025(+0.14) | +0.022(+0.11) |

#### skewness

| Horizon | Bull | AltSeason | Transition | Bear | All |
|---------|------|-----------|------------|------|-----|
| 1h | -0.006(-0.03) | -0.008(-0.04) | +0.012(+0.06) | -0.005(-0.03) | -0.005(-0.03) |
| 6h | -0.016(-0.08) | -0.017(-0.09) | -0.034(-0.17) | -0.006(-0.03) | -0.014(-0.08) |
| 12h | -0.010(-0.05) | -0.012(-0.06) | -0.050(-0.24) | -0.016(-0.09) | -0.013(-0.07) |
| 24h | -0.006(-0.03) | -0.017(-0.08) | -0.064(-0.31) | -0.016(-0.10) | -0.012(-0.06) |
| 48h | -0.006(-0.03) | -0.027(-0.14) | **-0.121(-0.60)** | -0.021(-0.12) | -0.017(-0.08) |

#### vol_expansion

| Horizon | Bull | AltSeason | Transition | Bear | All |
|---------|------|-----------|------------|------|-----|
| 1h | -0.013(-0.06) | -0.033(-0.15) | +0.017(+0.08) | -0.014(-0.07) | -0.014(-0.06) |
| 6h | -0.018(-0.09) | -0.015(-0.07) | -0.019(-0.09) | -0.010(-0.05) | -0.016(-0.08) |
| 12h | -0.023(-0.11) | -0.009(-0.05) | -0.045(-0.21) | -0.016(-0.08) | -0.021(-0.10) |
| 24h | -0.025(-0.12) | -0.013(-0.07) | -0.034(-0.17) | -0.009(-0.04) | -0.021(-0.10) |
| 48h | -0.041(-0.20) | -0.011(-0.06) | -0.037(-0.16) | -0.000(-0.00) | -0.028(-0.14) |

#### co_score

| Horizon | Bull | AltSeason | Transition | Bear | All |
|---------|------|-----------|------------|------|-----|
| **1h** | +0.158(+0.71) | +0.161(+0.76) | +0.170(+0.89) | **+0.185(+0.93)** | +0.165(+0.77) |
| 6h | +0.054(+0.28) | +0.059(+0.36) | +0.052(+0.30) | +0.051(+0.29) | +0.054(+0.29) |
| 12h | +0.021(+0.11) | +0.037(+0.23) | +0.023(+0.14) | +0.026(+0.15) | +0.024(+0.13) |
| 24h | +0.001(+0.01) | +0.026(+0.16) | +0.029(+0.18) | +0.028(+0.16) | +0.011(+0.06) |
| 48h | -0.001(-0.00) | +0.010(+0.06) | +0.019(+0.11) | +0.030(+0.16) | +0.008(+0.04) |

#### disposition

| Horizon | Bull | AltSeason | Transition | Bear | All |
|---------|------|-----------|------------|------|-----|
| **1h** | **+0.174(+0.75)** | +0.166(+0.75) | +0.161(+0.84) | +0.152(+0.69) | +0.167(+0.74) |
| 6h | +0.039(+0.16) | +0.038(+0.16) | +0.003(+0.01) | +0.036(+0.15) | +0.037(+0.15) |
| 12h | -0.004(-0.02) | +0.008(+0.03) | -0.027(-0.12) | +0.010(+0.04) | -0.001(-0.00) |
| 24h | -0.028(-0.11) | -0.006(-0.03) | -0.051(-0.23) | +0.014(+0.06) | -0.017(-0.07) |
| 48h | -0.040(-0.15) | -0.002(-0.01) | **-0.068(-0.30)** | +0.027(+0.10) | -0.022(-0.08) |

### 9.3 关键发现

#### 🏆 h=6h 各环境 IC 方向稳定性

| 因子 | Bull | AltSeason | Transition | Bear | 方向 |
|------|------|-----------|------------|------|------|
| downward_vol | -0.037 | -0.022 | -0.016 | -0.040 | ✅ STABLE (全负) |
| asymmetry | +0.020 | +0.020 | +0.041 | +0.007 | ✅ STABLE (全正) |
| skewness | -0.016 | -0.017 | -0.034 | -0.006 | ✅ STABLE (全负) |
| vol_expansion | -0.018 | -0.015 | -0.019 | -0.010 | ✅ STABLE (全负) |
| co_score | +0.054 | +0.059 | +0.052 | +0.051 | ✅ STABLE (全正) |
| disposition | +0.039 | +0.038 | +0.003 | +0.036 | ✅ STABLE (全正) |

**核心结论**: 所有 6 个因子在 4 个市场环境下的 h=6h IC **方向完全一致**, 没有翻转！这意味着因子逻辑在不同市场环境下是稳健的。

#### 📊 环境敏感性深度解读

**1. co_score — 熊市中更强 🔥**
- 牛市 h=1h: IC=+0.158, IR=0.71
- **熊市 h=1h: IC=+0.185, IR=0.93** ← 最强！
- 熊市中动量延续效应更强 — 恐慌性下跌时连续下跌的币继续跌得更猛
- **做空策略含义**: 熊市中 CO 因子信号更可靠

**2. downward_vol — 熊市效果翻倍 🔥**  
- 牛市 h=48h: IC=-0.070, IR=-0.21
- **熊市 h=48h: IC=-0.106, IR=-0.37** ← 效果翻倍！
- 熊市中高下行波动的币会进一步下跌 (恐慌蔓延)
- ⚠️ 转折期 Transition: IC 翻正 (+0.013) — 在见顶时高波动币反而可能反弹

**3. asymmetry + skewness — 转折期突变！惊喜发现 🌟**
- asymmetry 全期 IR ~0.10 (弱), 但 **Transition h=48h: IC=+0.126, IR=0.62**！
- skewness 全期 IR ~0.08 (噪音), 但 **Transition h=48h: IC=-0.121, IR=-0.60**！
- 这两个因子在市场转折期 (见顶后2周) **从噪音变成顶级信号**
- **经济解释**: 市场恐慌初期, 波动不对称性和负偏度成为强烈的做空预测指标
- **注意**: Transition 期仅 432h (18天), 样本量偏小, 需谨慎使用

**4. disposition — 转折期翻转最剧烈**
- 牛市 h=48h: IC=-0.040 (负, 支持做空高于 VWAP 的币)
- **Transition h=48h: IC=-0.068, IR=-0.30** ← 转折期处置效应最强
- **熊市 h=48h: IC=+0.027** ← 翻正！熊市中高于 VWAP 的币反而跌得少
- **解释**: 熊市中价格整体低于 VWAP, 偶尔反弹到 VWAP 之上的币有支撑
- **策略含义**: disposition 做空信号只在牛转熊时有效, 深熊中需要关闭

**5. vol_expansion — 牛市慢因子, 熊市衰退**
- 牛市 h=48h: IC=-0.041, IR=-0.20 (最强时期)
- **熊市 h=48h: IC=-0.000** ← 完全失效
- 牛市中波动突然扩大意味着"出问题了", 有做空价值
- 熊市中所有币都在扩大波动, 因子区分度消失

### 9.4 环境×因子适配矩阵

| 因子 | 牛市 | 山寨季 | 转折期 | 熊市 | 全天候? |
|------|------|--------|--------|------|---------|
| **co_score** | ★★★ | ★★★ | ★★★ | **★★★+** | ✅ 是 |
| **downward_vol** | ★★ | ★ | ⚠️ 失效 | **★★★** | ⚠️ 熊市最佳 |
| **disposition** (h≤6h) | ★★ | ★★ | ★ | ★★ | ✅ 是 |
| **disposition** (h≥24h) | ★★ | ✗ | **★★★** | ⚠️ 翻转 | ❌ 不是 |
| **asymmetry** | ★ | ★ | **★★★** | ★ | ❌ 仅转折 |
| **skewness** | ✗ | ★ | **★★★** | ★ | ❌ 仅转折 |
| **vol_expansion** | ★★ | ★ | ★ | ✗ 失效 | ❌ 仅牛市 |

---

## 10. 修订后的改进建议

基于分环境分析, 对第 8 节的建议进行修订:

### 10.1 因子使用策略

1. **co_score**: ✅ **全天候核心因子**, 熊市中更应该依赖
   - 作为入场过滤器: CO 极高 → 不做空
   - 熊市中可以适当提高 CO 的权重 (IR 从 0.71 升至 0.93)

2. **downward_vol**: ⚠️ **环境适应性因子**, 需要结合市场判断
   - 牛市/熊市: 48h 级别的**主选股信号**
   - 转折期: **暂停使用** (IC 翻正, 与预期相反)
   
3. **disposition**: ⚠️ **复杂的多时间尺度信号**
   - h=1-6h: 全天候有效的短期动量 → 入场过滤
   - h=24-48h: 仅在牛市和转折期有效 → 做空选股
   - **熊市中长期 disposition 需要关闭或反转方向**

4. **asymmetry + skewness**: 🌟 **转折期秘密武器**
   - 正常市场: 噪音, 不使用
   - **检测到市场转折信号时**: 激活, 给予高权重 (IR 可达 0.6)
   - 可以作为"危机 alpha"因子, 平时沉睡, 危机时唤醒

5. **vol_expansion**: 仅牛市有用, 熊市完全失效 → **降权或删除**

### 10.2 环境自适应架构

```
if market_regime == "bull" or "altseason":
    # 保守做空, 以波动率因子为主
    weight = {downward_vol: 0.40, vol_expansion: 0.20, disposition_24h: 0.20, co_filter: True}
    
elif market_regime == "transition":
    # 因子全开! asymmetry 和 skewness 突然有效
    weight = {downward_vol: 0.15, asymmetry: 0.30, skewness: 0.25, disposition_48h: 0.30, co_filter: True}
    
elif market_regime == "bear":
    # 以 downward_vol 和 co_score 为核心
    weight = {downward_vol: 0.55, co_filter: True (权重提高), disposition_24h: OFF}
```

### 10.3 如何判断市场环境

考虑添加一个简单的 regime 检测器到 `alpha.py`:
- BTC 30日 rolling return > +10% → Bull
- BTC 30日 rolling return < -10% → Bear  
- 中间 → Sideways / AltSeason / Transition
- 更精细: VIX 等效指标 (crypto volatility index) + BTC 支配率变化

---

## 11. 下一步研究计划

1. ~~分市场环境 IC 稳定性~~ ✅ 已完成 (本节)
2. ~~CSAD 羊群效应分析~~ ✅ 已完成 (本节)
3. **因子正交化**: 对 co_score 和 disposition 做正交化, 验证去相关后 IC 是否保持
4. **组合因子 IC**: 按环境自适应 IR 加权组合后的 composite factor IC
5. **transition 检测器**: 开发实时转折期检测信号, 以激活 asymmetry/skewness
6. **Walk-Forward 验证**: 用前 6 个月训练 IC 权重, 后 7 个月样本外验证
7. **交易成本调整后 IC**: 考虑 spread + 手续费后, 各 quintile 的净收益

---

## 12. CSAD (羊群效应) 分析 (新增)

### 12.1 定义与方法

*   **指标**: Gamma2 系数 ($\gamma_2$)，源自模型 $CSAD_t = \alpha + \gamma_1 |R_{m,t}| + \gamma_2 R_{m,t}^2$
*   **逻辑**: $\gamma_2$ 显著为负 $\to$ 市场大涨但个股收益率离散度反而降低 $\to$ 羊群效应 $\to$ 反转概率极高。
*   **计算参数**: 滚动窗口 48h, 步长 6h, 全市场 Top 50 币种。

### 12.2 统计结果

1.  **触发频率**: 极低。全样本仅 **1.2% (14次)** 出现显著羊群效应 ($\gamma_2 < 0, t < -2.0$)。这是一个非常稀缺的信号。

2.  **预测能力 (Next 24h Return)**:

| 市场环境 | 触发次数 (N) | 触发后 24h 平均跌幅 | 常态 24h 平均跌幅 | 提升效果 |
|----------|--------------|---------------------|-------------------|----------|
| **Bull** | 7 | **-0.81%** | -0.09% | **9.0x** |
| **Bear** | 7 | -0.32% | -0.26% | 1.2x |
| **Transition** | 0 | - | - | - |

### 12.3 结论与应用

*   **牛市中的"发令枪"**: 在牛市中，CSAD 羊群效应是一个**极高胜率的见顶信号**。虽然它不常出现，但一旦出现，意味着市场情绪极端一致，随之而来的往往是剧烈回调。
*   **策略应用**: 
    *   作为 **Global Alpha Boost**: 当检测到羊群效应时，大幅提高所有做空信号的置信度。
    *   作为 **熔断器**: 如果持有得是多头仓位，应立即减仓。

---

## 附录: 原始数据

### A. 样本统计

- 有效截面观测: N ≈ 1,400-1,479 个 (每 6h 一次, 50 tickers)
- 每次截面有效 symbol: ~50 个
- 总数据量: 50 tickers × ~534,000 分钟 bar ≈ 2,670 万行

### B. 分析代码

| 文件 | 用途 |
|------|------|
| `AltcoinShort/factor_ic_analysis.py` | 全样本 IC 分析 |
| `AltcoinShort/factor_ic_regime.py` | 分环境 IC 分析 |
| `data/ic_research/ic_analysis_results.csv` | 全样本结果 |
| `data/ic_research/ic_regime_results.csv` | 分环境结果 |
| `AltcoinShort/csad_analysis.py` | CSAD 分析脚本 |
| `data/ic_research/csad_results.csv` | CSAD 结果数据 |

